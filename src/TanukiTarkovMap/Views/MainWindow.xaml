<Window x:Class="TanukiTarkovMap.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:vm="clr-namespace:TanukiTarkovMap.ViewModels"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:converters="clr-namespace:TanukiTarkovMap.Converters"
        xmlns:behaviors="clr-namespace:TanukiTarkovMap.Behaviors"
        xmlns:views="clr-namespace:TanukiTarkovMap.Views"
        mc:Ignorable="d"
        DataContext="{Binding MainWindowViewModel, Source={StaticResource Locator}}"
        Title="Tanuki Tarkov Map"
        Icon="pack://application:,,,/Resources/korea.ico"
        Width="{Binding CurrentWindowWidth, Mode=TwoWay}"
        Height="{Binding CurrentWindowHeight, Mode=TwoWay}"
        Left="{Binding CurrentWindowLeft, Mode=TwoWay}"
        Top="{Binding CurrentWindowTop, Mode=TwoWay}"
        d:DesignWidth="800"
        d:DesignHeight="600"
        MinWidth="{Binding MinWidth}"
        MinHeight="{Binding MinHeight}"
        WindowStartupLocation="Manual"
        Background="Transparent"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="{Binding ResizeMode}"
        Topmost="{Binding IsTopmost}"
        UseLayoutRounding="True"
        SnapsToDevicePixels="True">

    <!-- Behaviors -->
    <i:Interaction.Behaviors>
        <!-- TopBar 애니메이션 Behavior -->
        <behaviors:TopBarAnimationBehavior
            IsAlwaysOnTop="{Binding IsAlwaysOnTop}"
            TopBarTransformName="TopBarTransform"
            BrowserContainerName="BrowserContainer"/>
        <!-- 트레이 창 표시/숨김 Behavior -->
        <behaviors:TrayWindowBehavior x:Name="TrayBehavior"/>
        <!-- 창 상태/위치/크기 변경 Behavior -->
        <behaviors:WindowStateBehavior
            MainGridName="MainGrid"
            MaximizeRestoreButtonName="MaximizeRestoreButton"/>
    </i:Interaction.Behaviors>

    <Window.Resources>
        <converters:BoolToColorConverter x:Key="BoolToColorConverter"/>
        <converters:BoolToToggleBackgroundConverter x:Key="BoolToToggleBackgroundConverter"/>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="0"
                      ResizeBorderThickness="8"
                      CornerRadius="8"
                      GlassFrameThickness="0"
                      UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>

    <Grid x:Name="MainGrid">
        <!-- Border로 감싸서 리사이즈 시 부드러운 효과 + 둥근 모서리 -->
        <Border x:Name="ContentBorder"
                Background="#FF1A1A1A"
                BorderThickness="1"
                CornerRadius="8"
                Margin="8"
                Opacity="{Binding ActualWindowOpacity}"
                SnapsToDevicePixels="True"
                UseLayoutRounding="True">
            <Border.Style>
                <Style TargetType="Border">
                    <Setter Property="BorderBrush">
                        <Setter.Value>
                            <SolidColorBrush Color="{StaticResource InactiveBorderColor}"/>
                        </Setter.Value>
                    </Setter>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsActive, RelativeSource={RelativeSource AncestorType=Window}}" Value="True">
                            <Setter Property="BorderBrush">
                                <Setter.Value>
                                    <SolidColorBrush Color="{StaticResource ActiveBorderColor}"/>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
            <Border.Effect>
                <DropShadowEffect Color="Black"
                                  Direction="270"
                                  ShadowDepth="0"
                                  BlurRadius="15"
                                  Opacity="0.4"/>
            </Border.Effect>
            <!-- 콘텐츠 클리핑용 Border (테두리 안쪽만 클리핑) -->
            <Border x:Name="ContentClipBorder" CornerRadius="7">
                <i:Interaction.Behaviors>
                    <behaviors:BorderClipBehavior/>
                </i:Interaction.Behaviors>
            <!-- 메인 컨텐츠 -->
            <Grid x:Name="MainContentGrid" Panel.ZIndex="1" ClipToBounds="True">
                <!-- Browser가 전체 영역을 차지하고, TopBar는 위에 오버레이 -->

                <!-- Browser 영역 (전체) -->
                <Border x:Name="BrowserContainer"
                        Background="#FF212121"
                        CornerRadius="0,0,8,8"
                        Margin="0,20,0,0"
                        ClipToBounds="True"
                        Visibility="{Binding BrowserContainerVisibility}">
                    <views:WebBrowserUserControl x:Name="WebBrowser"/>
                </Border>

                <!-- Goons 표시 (오른쪽 상단) -->
                <Border x:Name="GoonsIndicator"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Margin="0,24,8,0"
                        Background="#CC000000"
                        CornerRadius="4"
                        Padding="8,4"
                        Panel.ZIndex="100"
                        Visibility="{Binding GoonsOnCurrentMap, Converter={StaticResource BoolToVisibilityConverter}}">
                    <TextBlock Text="Goons"
                               FontSize="14"
                               FontWeight="Bold"
                               Foreground="#FFFF4444"/>
                </Border>

                <!-- 상단 바 (맵 선택 + UI 요소 숨기기 + 설정 버튼 + 윈도우 컨트롤) - Browser 위에 오버레이 -->
                <Border x:Name="TopBar"
                        VerticalAlignment="Top"
                        Background="#FF2A2A2A"
                        CornerRadius="8,8,0,0"
                        BorderThickness="0,0,0,1"
                        BorderBrush="#FF3A3A3A"
                        Padding="8,0"
                        Panel.ZIndex="200"
                        Height="20"
                        Visibility="{Binding TopBarVisibility}"
                        SnapsToDevicePixels="True"
                        UseLayoutRounding="True"
                        RenderTransformOrigin="0.5,0.5">
                    <!-- TitleBar 드래그 Behavior -->
                    <i:Interaction.Behaviors>
                        <behaviors:WindowDragBehavior EnableMaximizeOnDoubleClick="False"/>
                    </i:Interaction.Behaviors>
                    <Border.RenderTransform>
                        <TranslateTransform x:Name="TopBarTransform" Y="0"/>
                    </Border.RenderTransform>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="30"/>
                        <ColumnDefinition Width="30"/>
                        <ColumnDefinition Width="30"/>
                    </Grid.ColumnDefinitions>

                    <!-- 왼쪽: 맵 드롭다운 + 배율 드롭다운 + UI 요소 숨기기 체크박스 -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Map:"
                                   Foreground="#FF888888"
                                   VerticalAlignment="Center"
                                   Margin="0,0,8,0"
                                   FontSize="12"
                                   WindowChrome.IsHitTestVisibleInChrome="True"/>
                        <ComboBox x:Name="MapSelector"
                                  ItemsSource="{Binding AvailableMaps}"
                                  SelectedItem="{Binding SelectedMapInfo, Mode=TwoWay}"
                                  DisplayMemberPath="DisplayName"
                                  Style="{StaticResource DarkComboBox}"
                                  Width="105"
                                  Height="18"
                                  FontSize="10"
                                  Foreground="White"
                                  WindowChrome.IsHitTestVisibleInChrome="True">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="ComboBoxItem" BasedOn="{StaticResource DarkComboBoxItem}"/>
                            </ComboBox.ItemContainerStyle>
                        </ComboBox>

                        <!-- 배율 조정 -->
                        <TextBlock Text="🔍"
                                   Foreground="#FF888888"
                                   VerticalAlignment="Center"
                                   Margin="16,0,4,0"
                                   FontSize="12"
                                   WindowChrome.IsHitTestVisibleInChrome="True"/>
                        <ComboBox x:Name="ZoomSelector"
                                  ItemsSource="{Binding AvailableZoomLevels}"
                                  SelectedItem="{Binding SelectedZoomLevel, Mode=TwoWay}"
                                  Style="{StaticResource DarkComboBox}"
                                  Width="60"
                                  Height="18"
                                  FontSize="10"
                                  Foreground="White"
                                  WindowChrome.IsHitTestVisibleInChrome="True">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding StringFormat={}{0}%}"/>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="ComboBoxItem" BasedOn="{StaticResource DarkComboBoxItem}"/>
                            </ComboBox.ItemContainerStyle>
                        </ComboBox>

                        <!-- UI 요소 숨기기 체크박스 -->
                        <CheckBox x:Name="HideWebElementsCheckBox"
                                  IsChecked="{Binding HideWebElements, Mode=TwoWay}"
                                  Margin="16,0,0,0"
                                  VerticalAlignment="Center"
                                  Foreground="White"
                                  WindowChrome.IsHitTestVisibleInChrome="True">
                            <CheckBox.Content>
                                <TextBlock Text="UI 요소 숨기기"
                                           Foreground="#FF888888"
                                           FontSize="12"/>
                            </CheckBox.Content>
                        </CheckBox>

                        <!-- PMC/SCAV 토글 버튼 -->
                        <Border Margin="16,0,0,0"
                                Background="#FF3A3A3A"
                                CornerRadius="3"
                                Height="16"
                                WindowChrome.IsHitTestVisibleInChrome="True">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <!-- PMC 버튼 -->
                                <Border x:Name="PmcButton"
                                        Grid.Column="0"
                                        Background="{Binding IsPmcExtraction, Converter={StaticResource BoolToToggleBackgroundConverter}}"
                                        CornerRadius="3,0,0,3"
                                        Padding="6,0"
                                        Cursor="Hand">
                                    <Border.InputBindings>
                                        <MouseBinding MouseAction="LeftClick"
                                                      Command="{Binding SetPmcExtractionCommand}"
                                                      CommandParameter="True"/>
                                    </Border.InputBindings>
                                    <TextBlock Text="PMC"
                                               FontSize="10"
                                               FontWeight="SemiBold"
                                               Foreground="White"
                                               VerticalAlignment="Center"/>
                                </Border>
                                <!-- SCAV 버튼 -->
                                <Border x:Name="ScavButton"
                                        Grid.Column="1"
                                        Background="{Binding IsPmcExtraction, Converter={StaticResource BoolToToggleBackgroundConverter}, ConverterParameter=Invert}"
                                        CornerRadius="0,3,3,0"
                                        Padding="6,0"
                                        Cursor="Hand">
                                    <Border.InputBindings>
                                        <MouseBinding MouseAction="LeftClick"
                                                      Command="{Binding SetPmcExtractionCommand}"
                                                      CommandParameter="False"/>
                                    </Border.InputBindings>
                                    <TextBlock Text="SCAV"
                                               FontSize="10"
                                               FontWeight="SemiBold"
                                               Foreground="White"
                                               VerticalAlignment="Center"/>
                                </Border>
                            </Grid>
                        </Border>

                    </StackPanel>

                    <!-- 오른쪽: 투명도 조절 슬라이더 -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,8,0">
                        <TextBlock Text="💧"
                                   Foreground="#FF888888"
                                   VerticalAlignment="Center"
                                   Margin="0,0,4,0"
                                   FontSize="10"
                                   ToolTip="창 투명도"
                                   WindowChrome.IsHitTestVisibleInChrome="True"/>
                        <Slider x:Name="OpacitySlider"
                                Width="60"
                                Height="16"
                                Minimum="0.1"
                                Maximum="1.0"
                                Value="{Binding WindowOpacity, Mode=TwoWay}"
                                VerticalAlignment="Center"
                                WindowChrome.IsHitTestVisibleInChrome="True"
                                ToolTip="창 투명도 조절">
                            <i:Interaction.Behaviors>
                                <behaviors:OpacitySliderDragBehavior/>
                            </i:Interaction.Behaviors>
                            <Slider.Style>
                                <Style TargetType="Slider">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Slider">
                                                <Grid>
                                                    <Border Background="#FF3A3A3A"
                                                            CornerRadius="2"
                                                            Height="4"
                                                            VerticalAlignment="Center"/>
                                                    <Track x:Name="PART_Track">
                                                        <Track.Thumb>
                                                            <Thumb>
                                                                <Thumb.Style>
                                                                    <Style TargetType="Thumb">
                                                                        <Setter Property="Template">
                                                                            <Setter.Value>
                                                                                <ControlTemplate TargetType="Thumb">
                                                                                    <Ellipse Width="10" Height="10"
                                                                                             Fill="#FF4A90D9"
                                                                                             Stroke="#FF5AA0E9"
                                                                                             StrokeThickness="1"/>
                                                                                </ControlTemplate>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </Style>
                                                                </Thumb.Style>
                                                            </Thumb>
                                                        </Track.Thumb>
                                                    </Track>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Slider.Style>
                        </Slider>
                    </StackPanel>

                    <!-- 설정 버튼 -->
                    <Button x:Name="SettingsButton"
                            Grid.Column="2"
                            Width="30" Height="20"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="White"
                            Content="⚙"
                            FontSize="12"
                            Command="{Binding ToggleSettingsCommand}"
                            WindowChrome.IsHitTestVisibleInChrome="True">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="BorderBackground"
                                                    Background="Transparent"
                                                    CornerRadius="3">
                                                <ContentPresenter HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="BorderBackground" Property="Background" Value="#FF3A3A3A"/>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="True">
                                                    <Setter TargetName="BorderBackground" Property="Background" Value="#FF4A4A4A"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- 고정 핀 버튼 -->
                    <Button x:Name="PinButton"
                            Grid.Column="3"
                            Width="30" Height="20"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="{Binding IsAlwaysOnTop, Converter={StaticResource BoolToColorConverter}}"
                            Content="📌"
                            FontSize="12"
                            Command="{Binding TogglePinModeCommand}"
                            WindowChrome.IsHitTestVisibleInChrome="True">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="BorderBackground"
                                                    Background="Transparent"
                                                    CornerRadius="3">
                                                <ContentPresenter HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="BorderBackground" Property="Background" Value="#FF3A3A3A"/>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="True">
                                                    <Setter TargetName="BorderBackground" Property="Background" Value="#FF4A4A4A"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- 오른쪽: 윈도우 컨트롤 버튼 -->
                    <StackPanel Grid.Column="4" Orientation="Horizontal">
                        <!-- 최소화 버튼 (제거됨) -->
                        <Button x:Name="MinimizeButton"
                                Width="40" Height="25"
                                Background="Transparent"
                                BorderThickness="0"
                                Foreground="White"
                                Content="─"
                                FontSize="10"
                                Visibility="Collapsed"
                                WindowChrome.IsHitTestVisibleInChrome="True">
                            <i:Interaction.Behaviors>
                                <behaviors:WindowControlBehavior Action="Minimize"/>
                            </i:Interaction.Behaviors>
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}">
                                                    <ContentPresenter HorizontalAlignment="Center"
                                                                    VerticalAlignment="Center"
                                                                    Margin="0,-8,0,0"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#FF3A3A3A"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>

                        <!-- 최대화/복원 버튼 (제거됨) -->
                        <Button x:Name="MaximizeRestoreButton"
                                Width="40" Height="25"
                                Background="Transparent"
                                BorderThickness="0"
                                Foreground="White"
                                Content="□"
                                FontSize="12"
                                Visibility="Collapsed"
                                WindowChrome.IsHitTestVisibleInChrome="True">
                            <i:Interaction.Behaviors>
                                <behaviors:WindowControlBehavior Action="MaximizeRestore"/>
                            </i:Interaction.Behaviors>
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}">
                                                    <ContentPresenter HorizontalAlignment="Center"
                                                                    VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#FF3A3A3A"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>

                        <!-- 닫기 버튼 -->
                        <Button x:Name="CloseButton"
                                Grid.Column="3"
                                Width="30" Height="20"
                                Background="Transparent"
                                BorderThickness="0"
                                Foreground="White"
                                Content="✕"
                                FontSize="12"
                                WindowChrome.IsHitTestVisibleInChrome="True">
                            <i:Interaction.Behaviors>
                                <behaviors:WindowControlBehavior Action="Close"/>
                            </i:Interaction.Behaviors>
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="BorderBackground"
                                                        Background="Transparent"
                                                        CornerRadius="0,3,0,0">
                                                    <ContentPresenter HorizontalAlignment="Center"
                                                                    VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="BorderBackground" Property="Background" Value="#FFE81123"/>
                                                    </Trigger>
                                                    <Trigger Property="IsPressed" Value="True">
                                                        <Setter TargetName="BorderBackground" Property="Background" Value="#FFC50F1F"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>
            </Grid>
            </Border>
        </Border>

        <!-- 설정 패널 오버레이 (미니멀 스타일) -->
        <Border x:Name="SettingsOverlay"
                Panel.ZIndex="1000"
                Visibility="{Binding SettingsOverlayVisibility}"
                Background="#88000000"
                CornerRadius="8"
                Margin="8">
            <Grid>
                <!-- 반투명 배경 클릭 시 닫기 -->
                <Grid.InputBindings>
                    <MouseBinding MouseAction="LeftClick" Command="{Binding CloseSettingsCommand}"/>
                </Grid.InputBindings>

                <!-- 플로팅 설정 패널 -->
            <Border Width="620" Height="460"
                    Background="#FF1A1A1A"
                    CornerRadius="6"
                    BorderThickness="1"
                    BorderBrush="#FF3A3A3A"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                <i:Interaction.Behaviors>
                    <behaviors:BlockMouseEventBehavior/>
                </i:Interaction.Behaviors>
                <Border.Effect>
                    <DropShadowEffect Color="Black"
                                      Direction="270"
                                      ShadowDepth="2"
                                      BlurRadius="12"
                                      Opacity="0.5"/>
                </Border.Effect>

                <!-- 설정 패널 내용 영역 -->
                <Grid>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- 타이틀 바 -->
                    <Border Grid.Row="0"
                            Background="#FF2A2A2A"
                            CornerRadius="6,6,0,0"
                            BorderThickness="0,0,0,1"
                            BorderBrush="#FF3A3A3A"
                            Height="24">
                        <Grid Margin="8,0">
                            <TextBlock Text="설정"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="White"
                                       VerticalAlignment="Center"/>
                            <Button Content="✕"
                                    Width="18" Height="18"
                                    HorizontalAlignment="Right"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Foreground="White"
                                    FontSize="10"
                                    Command="{Binding CloseSettingsCommand}">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border x:Name="BorderBackground"
                                                            Background="Transparent"
                                                            CornerRadius="3">
                                                        <ContentPresenter HorizontalAlignment="Center"
                                                                        VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="BorderBackground" Property="Background" Value="#FFE81123"/>
                                                        </Trigger>
                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter TargetName="BorderBackground" Property="Background" Value="#FFC50F1F"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </Grid>
                    </Border>

                    <!-- 설정 페이지 컨텐츠 -->
                    <Border Grid.Row="1"
                            Background="Transparent"
                            Padding="0">
                        <views:SettingsPage/>
                    </Border>
                </Grid>
            </Border>
            </Grid>
        </Border>

        <!-- 전체 로딩 상태 표시 -->
        <Border x:Name="LoadingPanel"
                Background="#DD1A1A1A"
                Visibility="Collapsed"
                Panel.ZIndex="50">
            <StackPanel HorizontalAlignment="Center"
                        VerticalAlignment="Center">
                <TextBlock Text="Tarkov Client"
                           FontSize="32" 
                           FontWeight="Bold"
                           Foreground="White"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20"/>
                <TextBlock Text="초기화 중..."
                           FontSize="16" 
                           Foreground="#FF888888"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
